<div id="dropArea" class="mapBox">
	<img id="map" class="absolutePos" src="http://i.imgur.com/RJl1oFD.png"></img>
	<div class="absolutePos charDiv" ng-style="{top: determineY($index), left: determineX($index)}" ng-repeat="character in charaData" id="char_{{$index}}">
		<img ng-src="{{character[99]}}" ng-click="displayData($index)" class="hoverImage mapCharCentered"></img>
		<div class="healthBarBack"></div>
		<div class="healthBarFront" ng-style="{width:((character[7]/character[8])*28)+'px'}"></div>
		<div class="healthBarBorder"></div>
	</div>

	<!-- SELECTED CHARACTER DATA BOX -->
	<div id="infoBox" class="characterInfo" draggable="true" ng-show="loadedChar!=undefined">
		<!--Drag bar-->
		<div class="absolutePos dragBar olive"></div>
		<!--Close button-->
		<div class="infoElement closeButton hoverImage" ng-click="removeData()">
			<img src="IMG/close.png"></img>
		</div>
		<!--Name-->
		<div class="infoElement navy whiteText centerText charNamePos">
			<span style="vertical-align:middle">{{loadedChar[0]}}</span>
		</div>
		<!--Primary class-->
		<div class="infoElement paleTan redText classLvlPos" style="width:215px;margin-left:10px">
			<span class="indentedWeaponName">{{loadedChar[1]}}</span>
		</div>
		<!--Current level-->
		<div class="infoElement paleTan redText classLvlPos" style="width:55px;margin-left:180px">
			<span class="rightIndented">LV. {{loadedChar[2]}}</span>
		</div>
		<!--Current EXP-->
		<div class="infoElement paleTan redText movExpPos" style="margin-top:90px">
			<span class="indentedExpMovLabel">EXP</span>
			<span class="indentedExpMovText">{{loadedChar[3]}}</span>
		</div>
		<!--Movement-->
		<div class="infoElement paleTan redText movExpPos" style="margin-top:120px">
			<span class="indentedExpMovLabel"><img src="IMG/movement.png" style="display:inline-block"></span>
			<span class="indentedExpMovText">{{loadedChar[16]}}</span>
		</div>
		<!--HP-->
		<div class="infoElement darkTan tanText HpPos">
			<span class="HPText">HP</span>
			<span class="currHPText">{{loadedChar[7]}}</span>
			<span class="totalHPText"> / {{loadedChar[8]}}</span>
		</div>
		
		<!--Attack-->
		<div class="infoElement darkTan tanText atkHitPos" style="margin-top:150px">
			<span class="indentedStatLabel">Atk</span>
			<span class="largeIndentedStat" ng-if="checkRate(52)">{{loadedChar[52]}}</span>
			<span class="largeIndentedStat" ng-if="!checkRate(52)">-</span>
		</div>
		<!--Critical-->
		<div class="infoElement darkTan tanText critAvoPos" style="margin-top:150px">
			<span class="indentedStatLabel">Crit</span>
			<span class="largeIndentedStat" ng-if="checkRate(54)">{{loadedChar[54]}}</span>
			<span class="largeIndentedStat" ng-if="!checkRate(54)">-</span>
		</div>
		<!--Hit-->
		<div class="infoElement darkTan tanText atkHitPos" style="margin-top:181px">
			<span class="indentedStatLabel">Hit</span>
			<span class="largeIndentedStat" ng-if="checkRate(53)">{{loadedChar[53]}}</span>
			<span class="largeIndentedStat" ng-if="!checkRate(53)">-</span>
		</div>
		<!--Avoid-->
		<div class="infoElement darkTan tanText critAvoPos" style="margin-top:181px">
			<span class="indentedStatLabel">Avo</span>
			<span class="largeIndentedStat" ng-if="checkRate(55)">{{loadedChar[55]}}</span>
			<span class="largeIndentedStat" ng-if="!checkRate(55)">-</span>
		</div>
		
		
		<!--CHARACTER STATS (STR/MAG/SKL/ETC COLUMN)-->
		<!--ng-mouseover and ng-mouseleave trigger the appearance of the info box for each stat-->
		<!--Strength-->
		<div class="infoElement darkTan tanText statsPos hoverBrown" ng-mouseover="showStr=true" ng-mouseleave="showStr=false" style="margin-top:10px">
			<span class="indentedStatLabel">Str</span>
			<span class="indentedStat" ng-style="{color: determineStatColor('str')}">{{loadedChar[9]}}</span>
		</div>
		<!--Magic-->
		<div class="infoElement darkTan tanText statsPos hoverBrown" ng-mouseover="showMag=true" ng-mouseleave="showMag=false" style="margin-top:39px">
			<span class="indentedStatLabel">Mag</span>
			<span class="indentedStat" ng-style="{color: determineStatColor('mag')}">{{loadedChar[10]}}</span>
		</div>
		<!--Skill-->
		<div class="infoElement darkTan tanText statsPos hoverBrown" ng-mouseover="showSkl=true" ng-mouseleave="showSkl=false" style="margin-top:68px">
			<span class="indentedStatLabel">Skl</span>
			<span class="indentedStat" ng-style="{color: determineStatColor('skl')}">{{loadedChar[11]}}</span>
		</div>
		<!--Speed-->
		<div class="infoElement darkTan tanText statsPos hoverBrown" ng-mouseover="showSpd=true" ng-mouseleave="showSpd=false" style="margin-top:97px">
			<span class="indentedStatLabel">Spd</span>
			<span class="indentedStat" ng-style="{color: determineStatColor('spd')}">{{loadedChar[12]}}</span>
		</div>
		<!--Luck-->
		<div class="infoElement darkTan tanText statsPos hoverBrown" ng-mouseover="showLck=true" ng-mouseleave="showLck=false" style="margin-top:126px">
			<span class="indentedStatLabel">Lck</span>
			<span class="indentedStat" ng-style="{color: determineStatColor('lck')}">{{loadedChar[13]}}</span>
		</div>
		<!--Defense-->
		<div class="infoElement darkTan tanText statsPos hoverBrown" ng-mouseover="showDef=true" ng-mouseleave="showDef=false" style="margin-top:155px">
			<span class="indentedStatLabel">Def</span>
			<span class="indentedStat" ng-style="{color: determineStatColor('def')}">{{loadedChar[14]}}</span>
		</div>
		<!--Resistance-->
		<div class="infoElement darkTan tanText statsPos hoverBrown" ng-mouseover="showRes=true" ng-mouseleave="showRes=false" style="margin-top:184px">
			<span class="indentedStatLabel">Res</span>
			<span class="indentedStat" ng-style="{color: determineStatColor('res')}">{{loadedChar[15]}}</span>
		</div>
		
		
		<!--Equipped items-->
		<div class="infoElement lightTan redText itemsPos" title="Equipped weapon" style="margin-top:10px">
			<span class="indentedWeaponName" ng-if="validWeapon(100)">{{loadedChar[100]}}</span>
		</div>
		<div class="infoElement paleTan redText itemsPos" style="margin-top:45px">
			<span class="indentedWeaponName" ng-if="validWeapon(101)">{{loadedChar[101]}}</span>
		</div>
		<div class="infoElement paleTan redText itemsPos" style="margin-top:80px">
			<span class="indentedWeaponName" ng-if="validWeapon(102)">{{loadedChar[102]}}</span>
		</div>
		<div class="infoElement paleTan redText itemsPos" style="margin-top:115px">
			<span class="indentedWeaponName" ng-if="validWeapon(103)">{{loadedChar[103]}}</span>
		</div>
		<div class="infoElement paleTan redText itemsPos" style="margin-top:150px">
			<span class="indentedWeaponName" ng-if="validWeapon(104)">{{loadedChar[104]}}</span>
		</div>
		
		
		<!--Weapon ranks-->
		<div ng-if="existsWeapon(28)" class="infoElement weaponRankPos" style="margin-left:355px">
			<span style="position:relative">
				<img ng-src="{{weaponIcon(28)}}" style="display:inline-block">
				<div class="weaponRankBar" ng-style="{width:calcWeaponExp(4)+'px'}"></div>
				<div class="weaponRankBorder"></div>
				<div class="weaponRankLtrPos">{{loadedChar[29]}}</div>
			</span>
		</div>
		<div ng-if="existsWeapon(30)" class="infoElement weaponRankPos" style="margin-left:430px">
			<span style="position:relative">
				<img ng-src="{{weaponIcon(30)}}" style="display:inline-block">
				<div class="weaponRankBar" ng-style="{width:calcWeaponExp(5)+'px'}"></div>
				<div class="weaponRankBorder"></div>
				<div class="weaponRankLtrPos">{{loadedChar[31]}}</div>
			</span>
		</div>
		<div ng-if="existsWeapon(32)" class="infoElement weaponRankPos" style="margin-left:505px">
			<span style="position:relative">
				<img ng-src="{{weaponIcon(32)}}" style="display:inline-block">
				<div class="weaponRankBar" ng-style="{width:calcWeaponExp(6)+'px'}"></div>
				<div class="weaponRankBorder"></div>
				<div class="weaponRankLtrPos">{{loadedChar[33]}}</div>
			</span>
		</div>
		
		
		<!--Pair Up Icon-->
		<!--ng-mouseover and ng-mouseleave trigger the appearance of the info box when you hover over the icon-->
		<div class="infoElement hoverImage pairUpIcoPos" ng-mouseover="pairUp=true" ng-mouseleave="pairUp=false">
			<img ng-src="IMG/pairup.png"></img>
		</div>
		
		
		<!--Skill Gems-->
		<!--ng-mouseover and ng-mouseleave trigger the appearance of the info box for each skill-->
		<div class="infoElement hoverImage skillGemPos" ng-mouseover="wGem=true" ng-mouseleave="wGem=false" style="margin-top:10px">
			<img ng-src="IMG/white_skill.png"></img>
		</div>
		<div class="infoElement hoverImage skillGemPos" ng-mouseover="pkGem=true" ng-mouseleave="pkGem=false" style="margin-top:33px">
			<img ng-src="IMG/pink_skill.png"></img>
		</div>
		<div class="infoElement hoverImage skillGemPos" ng-mouseover="rGem=true" ng-mouseleave="rGem=false" style="margin-top:56px">
			<img ng-if="checkLvl(5)" ng-src="IMG/red_skill.png"></img>
			<img ng-if="!checkLvl(5)" ng-src="IMG/blank_skill.png"></img>
		</div>
		<div class="infoElement hoverImage skillGemPos" ng-mouseover="oGem=true" ng-mouseleave="oGem=false" style="margin-top:79px">
			<img ng-if="checkLvl(10)" ng-src="IMG/orange_skill.png"></img>
			<img ng-if="!checkLvl(10)" ng-src="IMG/blank_skill.png"></img>
		</div>
		<div class="infoElement hoverImage skillGemPos" ng-mouseover="yGem=true" ng-mouseleave="yGem=false" style="margin-top:102px">
			<img ng-if="checkLvl(15)" ng-src="IMG/yellow_skill.png"></img>
			<img ng-if="!checkLvl(15)" ng-src="IMG/blank_skill.png"></img>
		</div>
		<div class="infoElement hoverImage skillGemPos" ng-mouseover="gGem=true" ng-mouseleave="gGem=false" style="margin-top:125px">
			<img ng-if="checkLvl(20)" ng-src="IMG/green_skill.png"></img>
			<img ng-if="!checkLvl(20)" ng-src="IMG/blank_skill.png"></img>
		</div>
		<div class="infoElement hoverImage skillGemPos" ng-mouseover="aGem=true" ng-mouseleave="aGem=false" style="margin-top:147px">
			<img ng-if="checkLvl(25)" ng-src="IMG/aqua_skill.png"></img>
			<img ng-if="!checkLvl(25)" ng-src="IMG/blank_skill.png"></img>
		</div>
		<div class="infoElement hoverImage skillGemPos" ng-mouseover="bGem=true" ng-mouseleave="bGem=false" style="margin-top:170px">
			<img ng-if="checkLvl(30)" ng-src="IMG/blue_skill.png"></img>
			<img ng-if="!checkLvl(30)" ng-src="IMG/blank_skill.png"></img>
		</div>
		<div class="infoElement hoverImage skillGemPos" ng-mouseover="prGem=true" ng-mouseleave="prGem=false" style="margin-top:192px">
			<img ng-if="checkLvl(35)" ng-src="IMG/purple_skill.png"></img>
			<img ng-if="!checkLvl(35)" ng-src="IMG/blank_skill.png"></img>
		</div>
		
		<!--Skill Gem Info Boxes-->
		<div ng-if="wGem" class="infoElement green whiteText skillGemInfoPos" style="margin-top:5px">
			<div class="italicText popOutText popOutHeader">[Personal Skill]</div>
			<div class="boldText popOutText personalSkillHeader">{{loadedChar[113][0]}}</div>
			<div class="popOutText personalSkillBody">{{loadedChar[113][1]}}</div>
		</div>
		<div ng-if="pkGem" class="infoElement green whiteText skillGemInfoPos" style="margin-top:15px">
			<div class="boldText popOutText popOutHeader">{{loadedChar[105][0]}}</div>
			<div class="popOutText popOutBody">{{loadedChar[105][1]}}</div>
		</div>
		<div ng-if="rGem" class="infoElement green whiteText skillGemInfoPos" style="margin-top:22px">
			<div class="boldText popOutText popOutHeader">{{loadedChar[106][0]}}</div>
			<div class="popOutText popOutBody">{{loadedChar[106][1]}}</div>
		</div>
		<div ng-if="oGem" class="infoElement green whiteText skillGemInfoPos" style="margin-top:29px">
			<div class="boldText popOutText popOutHeader">{{loadedChar[107][0]}}</div>
			<div class="popOutText popOutBody">{{loadedChar[107][1]}}</div>
		</div>
		<div ng-if="yGem" class="infoElement green whiteText skillGemInfoPos" style="margin-top:36px">
			<div class="boldText popOutText popOutHeader">{{loadedChar[108][0]}}</div>
			<div class="popOutText popOutBody">{{loadedChar[108][1]}}</div>
		</div>
		<div ng-if="gGem" class="infoElement green whiteText skillGemInfoPos" style="margin-top:43px">
			<div class="boldText popOutText popOutHeader">{{loadedChar[109][0]}}</div>
			<div class="popOutText popOutBody">{{loadedChar[109][1]}}</div>
		</div>
		<div ng-if="aGem" class="infoElement green whiteText skillGemInfoPos" style="margin-top:50px">
			<div class="boldText popOutText popOutHeader">{{loadedChar[110][0]}}</div>
			<div class="popOutText popOutBody">{{loadedChar[110][1]}}</div>
		</div>
		<div ng-if="bGem" class="infoElement green whiteText skillGemInfoPos" style="margin-top:57px">
			<div class="boldText popOutText popOutHeader">{{loadedChar[111][0]}}</div>
			<div class="popOutText popOutBody">{{loadedChar[111][1]}}</div>
		</div>
		<div ng-if="prGem" class="infoElement green whiteText skillGemInfoPos" style="margin-top:63px">
			<div class="boldText popOutText popOutHeader">{{loadedChar[112][0]}}</div>
			<div class="popOutText popOutBody">{{loadedChar[112][1]}}</div>
		</div>
		
		<!--Stat Info Boxes (Modifiers)-->
		<div ng-if="showStr" class="infoElement green whiteText statInfoPos" style="margin-top:5px">
			<div class="italicText popOutText popOutHeader">Strength. Affects damage the unit deals with physical attacks.</div>
			<div class="popOutText personalSkillBody">
				<span>Base value: {{loadedChar[92]}}<br></span>
				<span ng-if="validDebuff(19)">Buff/Debuff: {{loadedChar[19]}}<br></span>
				<span ng-if="validWeaponBuff(45)">{{loadedChar[37]}}: {{loadedChar[45]}}<br></span>
				<span ng-if="validPairUpBuff(59)">Pair-up: +{{loadedChar[59]}}</span>
			</div>
		</div>
		<div ng-if="showMag" class="infoElement green whiteText statInfoPos" style="margin-top:29px">
			<div class="italicText popOutText popOutHeader">Magic. Affects damage the unit deals with magical attacks.</div>
			<div class="popOutText personalSkillBody">
				<span>Base value: {{loadedChar[93]}}<br></span>
				<span ng-if="validDebuff(20)">Buff/Debuff: {{loadedChar[20]}}<br></span>
				<span ng-if="validWeaponBuff(46)">{{loadedChar[37]}}: {{loadedChar[46]}}<br></span>
				<span ng-if="validPairUpBuff(60)">Pair-up: +{{loadedChar[60]}}</span>
			</div>
		</div>
		<div ng-if="showSkl" class="infoElement green whiteText statInfoPos" style="margin-top:53px">
			<div class="italicText popOutText popOutHeader">Skill. Affects hit rate and the frequency of critical hits.</div>
			<div class="popOutText personalSkillBody">
				<span>Base value: {{loadedChar[94]}}<br></span>
				<span ng-if="validDebuff(21)">Buff/Debuff: {{loadedChar[21]}}<br></span>
				<span ng-if="validWeaponBuff(47)">{{loadedChar[37]}}: {{loadedChar[47]}}<br></span>
				<span ng-if="validPairUpBuff(61)">Pair-up: +{{loadedChar[61]}}</span>
			</div>
		</div>
		<div ng-if="showSpd" class="infoElement green whiteText statInfoPos" style="margin-top:72px">
			<div class="italicText popOutText popOutHeader">Speed. Affects Avo. Unit strikes twice if 5 higher than opponent.</div>
			<div class="popOutText personalSkillBody">
				<span>Base value: {{loadedChar[95]}}<br></span>
				<span ng-if="validDebuff(22)">Buff/Debuff: {{loadedChar[22]}}<br></span>
				<span ng-if="validWeaponBuff(48)">{{loadedChar[37]}}: {{loadedChar[48]}}<br></span>
				<span ng-if="validPairUpBuff(62)">Pair-up: +{{loadedChar[62]}}</span>
			</div>
		</div>
		<div ng-if="showLck" class="infoElement green whiteText statInfoPos" style="margin-top:96px">
			<div class="italicText popOutText popOutHeader">Luck. Has various effects. Lowers risk of enemy criticals.</div>
			<div class="popOutText personalSkillBody">
				<span>Base value: {{loadedChar[96]}}<br></span>
				<span ng-if="validDebuff(23)">Buff/Debuff: {{loadedChar[23]}}<br></span>
				<span ng-if="validWeaponBuff(49)">{{loadedChar[37]}}: {{loadedChar[49]}}<br></span>
				<span ng-if="validPairUpBuff(63)">Pair-up: +{{loadedChar[63]}}</span>
			</div>
		</div>
		<div ng-if="showDef" class="infoElement green whiteText statInfoPos" style="margin-top:106px">
			<div class="italicText popOutText popOutHeader">Defense. Reduces damage from physical attacks.</div>
			<div class="popOutText personalSkillBody">
				<span>Base value: {{loadedChar[97]}}<br></span>
				<span ng-if="validDebuff(24)">Buff/Debuff: {{loadedChar[24]}}<br></span>
				<span ng-if="validWeaponBuff(50)">{{loadedChar[37]}}: {{loadedChar[50]}}<br></span>
				<span ng-if="validPairUpBuff(64)">Pair-up: +{{loadedChar[64]}}</span>
			</div>
		</div>
		<div ng-if="showRes" class="infoElement green whiteText statInfoPos" style="margin-top:109px">
			<div class="italicText popOutText popOutHeader">Resistance. Reduces damage from physical attacks.</div>
			<div class="popOutText personalSkillBody">
				<span>Base value: {{loadedChar[98]}}<br></span>
				<span ng-if="validDebuff(25)">Buff/Debuff: {{loadedChar[25]}}<br></span>
				<span ng-if="validWeaponBuff(51)">{{loadedChar[37]}}: {{loadedChar[51]}}<br></span>
				<span ng-if="validPairUpBuff(65)">Pair-up: +{{loadedChar[65]}}</span>
			</div>
		</div>
		
		
		<!--Pair Up Stats Info-->
		<div ng-if="pairUp" class="infoElement green whiteText pairUpInfoPos">
			<div class="popOutText popOutHeader boldText">Pair Up Bonuses</div>
			<div class="popOutText popOutBody">
				Str: +{{loadedChar[71]}}<br>
				Mag: +{{loadedChar[72]}}<br>
				Skl: +{{loadedChar[73]}}<br>
				Spd: +{{loadedChar[74]}}<br>
				Lck: +{{loadedChar[75]}}<br>
				Def: +{{loadedChar[76]}}<br>
				Res: +{{loadedChar[77]}}<br>
				Mov: +{{loadedChar[78]}}
			</div>
		</div>
	</div>
</div>